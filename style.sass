$hit-min: 44
$total-width: $hit-min * 7
$segment-width: ($total-width - (2 * $hit-min)) / 3 - 10

$current-date-foreground: #555555
$current-date-background: #e9e9e9
$current-date-font-size: #{$hit-min / 2}px

$calendar-head-background: #333333
$calendar-head-foreground: white

$prev-next-edge-margin: 7px

$calendar-body-background: #cccccc
$calendar-body-foreground: #555555
$calendar-body-font-size: #{$hit-min / 3}px

$chosen-day-stroke: #222222
$chosen-day-fill: white

$other-months-foreground: #999999

.mithril-date-picker-container
	position: relative
	display: inline-block
	z-index: 0

	&.active
		z-index: 99999

.mithril-date-picker, .mithril-date-picker *
	box-sizing: border-box
	-webkit-user-select: none
	-moz-user-select: none
	-ms-user-select: none
	user-select: none

.mithril-date-picker 
	margin: 0 4px
	
	*, button
		font-family: Optima, Helvetica, Arial, sans-serif
		outline: none

	.current-date
		position: relative
		width: #{$total-width}px
		background: $current-date-background
		border: 0
		color: $current-date-foreground
		padding: 10px
		font-size: $current-date-font-size
		text-align: center
		cursor: pointer
		z-index: 1

	.overlay
		position: fixed
		top: 0
		left: 0
		width: 100vw
		height: 100vh
		background: rgba(255, 255, 255, 0.8)

	.incoming
		opacity: 0

	.editor
		position: absolute
		box-sizing: border-box
		margin: 0 4px
		top: 0
		left: 0
		width: #{$total-width}px
		height: 0
		transition: height 0.2s
		z-index: 1
		overflow: hidden

		&.active
			height: 400px

	.header
		position: relative
		display: flex
		justify-content: space-between
		background: #222222
		border-radius: 4px
		margin-bottom: 4px

		button
			position: relative
			padding: 0
			margin: 0
			height: #{$hit-min}px
			background: none
			border: 0
			cursor: pointer

		button.prev, button.next
			min-width: #{$hit-min}px
			font-size: 0.8em
			color: white

			&:after
				content: ''
				position: absolute
				top: 16px
				width: 12px
				height: 12px
				border-top: 2px solid $calendar-head-foreground
				border-right: 2px solid $calendar-head-foreground

		button.prev
			text-align: left
			padding-left: 20px
			margin-right: auto

			&:after
				margin-left: $prev-next-edge-margin
				margin-right: auto
				left: 0
				transform: rotate(-135deg)

		button.next
			text-align: right
			padding-right: 20px
			margin-left: auto

			&:after
				margin-right: $prev-next-edge-margin
				margin-left: auto
				right: 0
				transform: rotate(45deg)

		.button-bg
			position: absolute
			top: 50%
			transform: translateY(-50%)
			width: #{$segment-width}px
			height: 80%
			background: #999999
			transition: 0.2s

			&.v0
				left: #{$hit-min + 15}px
				border-top-left-radius: 16px
				border-bottom-left-radius: 16px

			&.v1
				left: #{$segment-width + $hit-min + 15}px
				border-radius: 0

			&.v2
				left: #{2 * $segment-width + $hit-min + 15}px
				border-top-right-radius: 16px
				border-bottom-right-radius: 16px
				
		.fake-border
			position: absolute
			left: 50%
			top: 50%
			width: #{3 * $segment-width}px
			height: 80%
			transform: translate(-50%, -50%)
			border: 1px solid #999999
			border-radius: 16px
			

		.segment
			position: relative
			width: #{$segment-width}px
			color: white
			font-size: 1.25em
			
	.sled
		position: relative
		display: flex
		width: 300%
		transition: margin-left 0.2s

		&.p0
			margin-left: 0

		&.p1
			margin-left: -100%

		&.p2
			margin-left: -200%

	.calendar
		border-radius: 4px
		position: relative
		overflow: hidden
		width: #{$total-width}px
		z-index: 0

	.weekdays, .months
		display: flex
		flex-wrap: wrap

	.day, .month, .year
		position: relative
		font-size: $calendar-body-font-size
		background: $calendar-body-background
		border: 0
		color: $calendar-body-foreground
		cursor: pointer
		z-index: 0

		&:focus
			z-index: 1

		&:hover
			background: darken($calendar-body-background, 10)

		&.dummy
			background: $calendar-head-background
			color: $calendar-head-foreground
			border: 0
			cursor: default
			display: flex
			justify-content: center
			align-items: center

			&:hover
				background: $calendar-head-background

		.number
			position: relative
			z-index: 1

		&.chosen:before 
			content: ''
			position: absolute
			top: 50%
			left: 50%
			transform: translate(-50%, -50%)
			width: 80%
			height: 80%
			border-radius: 50%
			border: 1px solid $chosen-day-stroke
			background: $chosen-day-fill
			z-index: 0

	.day
		width: #{$hit-min}px
		height: #{$hit-min}px

	.month
		width: 25%
		height: #{$hit-min * 7 / 4}px

	.year
		width: 20%
		height: #{$hit-min * 7 / 5}px

	.other-scope
		color: $other-months-foreground 